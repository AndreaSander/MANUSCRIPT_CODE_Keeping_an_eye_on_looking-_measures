knitr::opts_chunk$set(echo = TRUE)
library(here)
library(dbplyr)
load(here("clean_data/arch_final.Rda"))
View(arch_final)
kbh_data_clean <- arch_final%>%
group_by(studio_project_name, studio_test_name, trial_number, recording_name)%>%
mutate(trial_from_zero = recording_timestamp-min(recording_timestamp))%>%
group_by(studio_project_name)%>%
mutate(noun_onset = case_when(studio_project_name=="CompMix-36"~trial_from_zero-3000, #Substracting noun onset to normalize
studio_project_name=="LearnMix-36"~trial_from_zero-4500,
studio_project_name=="Mix-20"~trial_from_zero-5400,
studio_project_name=="Mix-14"~trial_from_zero-5400,
studio_project_name=="CogMisp-24"~trial_from_zero-1500))%>%
ungroup()%>%
rename(target_side=target, distractor_side=distractor,
gaze_point_x= gaze_point_x_adc_spx,
gaze_point_y = gaze_point_y_adc_spx)%>%
filter(gaze_point_x>=0 & gaze_point_x<= 1920)%>% #keeps only observations that are in the screen
filter(gaze_point_y>=0 & gaze_point_y<=1200)%>%
filter(!is.na(gaze_point_x))%>% #gets rid of the observations where tobii didn't get any reading
filter(!is.na(gaze_point_y))%>%
filter(!is.na(validity_left)) %>%
filter(!is.na(validity_right)) %>%
filter(validity_left<= 1)%>%
filter(validity_right <= 1)%>%
mutate(target = case_when(gaze_point_x >= target_x_min&gaze_point_x <= target_x_max&gaze_point_y >= target_y_min&gaze_point_y <= target_y_max~TRUE,
TRUE~FALSE))
library(here)
library(dbplyr)
load(here("clean_data/arch_final.Rda"))
library(dplyr)
kbh_data_clean <- arch_final%>%
group_by(studio_project_name, studio_test_name, trial_number, recording_name)%>%
mutate(trial_from_zero = recording_timestamp-min(recording_timestamp))%>%
group_by(studio_project_name)%>%
mutate(noun_onset = case_when(studio_project_name=="CompMix-36"~trial_from_zero-3000, #Substracting noun onset to normalize
studio_project_name=="LearnMix-36"~trial_from_zero-4500,
studio_project_name=="Mix-20"~trial_from_zero-5400,
studio_project_name=="Mix-14"~trial_from_zero-5400,
studio_project_name=="CogMisp-24"~trial_from_zero-1500))%>%
ungroup()%>%
rename(target_side=target, distractor_side=distractor,
gaze_point_x= gaze_point_x_adc_spx,
gaze_point_y = gaze_point_y_adc_spx)%>%
filter(gaze_point_x>=0 & gaze_point_x<= 1920)%>% #keeps only observations that are in the screen
filter(gaze_point_y>=0 & gaze_point_y<=1200)%>%
filter(!is.na(gaze_point_x))%>% #gets rid of the observations where tobii didn't get any reading
filter(!is.na(gaze_point_y))%>%
filter(!is.na(validity_left)) %>%
filter(!is.na(validity_right)) %>%
filter(validity_left<= 1)%>%
filter(validity_right <= 1)%>%
mutate(target = case_when(gaze_point_x >= target_x_min&gaze_point_x <= target_x_max&gaze_point_y >= target_y_min&gaze_point_y <= target_y_max~TRUE,
TRUE~FALSE))
#Create trial language column to describe the language in which the babies were tested
arch_re_zero <- arch_re_zero%>%
ungroup()%>%
group_by(studio_test_name, eng_exp, fre_exp)%>%
mutate(trial_lang = case_when(str_detect(studio_test_name,"E")~ "english",
str_detect(studio_test_name, "F")~ "french"))
#Create trial language column to describe the language in which the babies were tested
kbh_data_clean <- kbh_data_clean %>%
ungroup()%>%
group_by(studio_test_name, eng_exp, fre_exp)%>%
mutate(trial_lang = case_when(str_detect(studio_test_name,"E")~ "english",
str_detect(studio_test_name, "F")~ "french"))
library(stringr)
#Create trial language column to describe the language in which the babies were tested
kbh_data_clean <- kbh_data_clean %>%
ungroup()%>%
group_by(studio_test_name, eng_exp, fre_exp)%>%
mutate(trial_lang = case_when(str_detect(studio_test_name,"E")~ "english",
str_detect(studio_test_name, "F")~ "french"))
View(kbh_data_clean)
RT <- arch_final %>%
filter(noun_onset>= 360 & noun_onset <= 1800)%>%
group_by(trial_number) %>%
mutate(first_true = ifelse(target == TRUE & lag(target) == FALSE, 1, 0))
kbh_data_clean <- arch_final%>%
group_by(studio_project_name, studio_test_name, trial_number, recording_name)%>%
mutate(trial_from_zero = recording_timestamp-min(recording_timestamp))%>%
group_by(studio_project_name)%>%
mutate(noun_onset = case_when(studio_project_name=="CompMix-36"~trial_from_zero-3000, #Substracting noun onset to normalize
studio_project_name=="LearnMix-36"~trial_from_zero-4500,
studio_project_name=="Mix-20"~trial_from_zero-5400,
studio_project_name=="Mix-14"~trial_from_zero-5400,
studio_project_name=="CogMisp-24"~trial_from_zero-1500))%>%
ungroup()%>%
rename(target_side=target, distractor_side=distractor,
gaze_point_x= gaze_point_x_adc_spx,
gaze_point_y = gaze_point_y_adc_spx)%>%
filter(gaze_point_x>=0 & gaze_point_x<= 1920)%>% #keeps only observations that are in the screen
filter(gaze_point_y>=0 & gaze_point_y<=1200)%>%
filter(!is.na(gaze_point_x))%>% #gets rid of the observations where tobii didn't get any reading
filter(!is.na(gaze_point_y))%>%
filter(!is.na(validity_left)) %>%
filter(!is.na(validity_right)) %>%
filter(validity_left<= 1)%>%
filter(validity_right <= 1)%>%
mutate(target = case_when(gaze_point_x >= target_x_min&gaze_point_x <= target_x_max&gaze_point_y >= target_y_min&gaze_point_y <= target_y_max~TRUE,
TRUE~FALSE))
RT <- arch_final %>%
filter(noun_onset>= 360 & noun_onset <= 1800)%>%
group_by(trial_number) %>%
mutate(first_true = ifelse(target == TRUE & lag(target) == FALSE, 1, 0))
View(kbh_data_clean)
RT <- kbh_data_clean %>%
filter(noun_onset >= 360 & noun_onset <= 1800)%>%
group_by(trial_number) %>%
mutate(first_true = ifelse(target == TRUE & lag(target) == FALSE, 1, 0))
View(RT)
unique(RT$first_true)
library(here)
library(dplyr)
library(stringr)
load(here("clean_data/arch_final.Rda"))
kbh_data_clean <- arch_final%>%
group_by(studio_project_name, studio_test_name, trial_number, recording_name)%>%
mutate(trial_from_zero = recording_timestamp-min(recording_timestamp))%>%
group_by(studio_project_name)%>%
mutate(noun_onset = case_when(studio_project_name=="CompMix-36"~trial_from_zero-3000, #Substracting noun onset to normalize
studio_project_name=="LearnMix-36"~trial_from_zero-4500,
studio_project_name=="Mix-20"~trial_from_zero-5400,
studio_project_name=="Mix-14"~trial_from_zero-5400,
studio_project_name=="CogMisp-24"~trial_from_zero-1500))%>%
ungroup()%>%
rename(target_side=target, distractor_side=distractor,
gaze_point_x= gaze_point_x_adc_spx,
gaze_point_y = gaze_point_y_adc_spx)%>%
filter(gaze_point_x>=0 & gaze_point_x<= 1920)%>% #keeps only observations that are in the screen
filter(gaze_point_y>=0 & gaze_point_y<=1200)%>%
filter(!is.na(gaze_point_x))%>% #gets rid of the observations where tobii didn't get any reading
filter(!is.na(gaze_point_y))%>%
filter(!is.na(validity_left)) %>%
filter(!is.na(validity_right)) %>%
filter(validity_left<= 1)%>%
filter(validity_right <= 1)%>%
mutate(target = case_when(gaze_point_x >= target_x_min&gaze_point_x <= target_x_max&gaze_point_y >= target_y_min&gaze_point_y <= target_y_max~TRUE,
TRUE~FALSE))
#Create trial language column to describe the language in which the babies were tested
kbh_data_clean <- kbh_data_clean %>%
ungroup()%>%
group_by(studio_test_name, eng_exp, fre_exp)%>%
mutate(trial_lang = case_when(str_detect(studio_test_name,"E")~ "english",
str_detect(studio_test_name, "F")~ "french"))
1800-360
1440/2
RT <- kbh_data_clean %>%
filter(noun_onset >= 360 & noun_onset <= 1800)%>%
group_by(trial_number) %>%
mutate(distractor_initial_trial = case_when(noun_onset >=360 & target==FALSE ~ distractor_initial,
TRUE ~ target_initial)
)
RT <- kbh_data_clean %>%
filter(noun_onset >= 360 & noun_onset <= 1800)%>%
group_by(trial_number) %>%
mutate(distractor_initial_trial = case_when(noun_onset ==360 & target==FALSE ~ distractor_initial,
TRUE ~ target_initial)
)
RT <- kbh_data_clean %>%
filter(noun_onset >= 360 & noun_onset <= 1800)%>%
group_by(trial_number) %>%
mutate(distractor_initial_trial = case_when(noun_onset ==360 & target==FALSE ~ "distractor_initial",
TRUE ~ "target_initial")
)
View(RT)
unique(RT$distractor_initial_trial)
RT <- kbh_data_clean %>%
filter(noun_onset >= 360 & noun_onset <= 1800)%>%
group_by(trial_number) %>%
mutate(distractor_initial_trial = case_when(noun_onset ==360 & target==FALSE ~ "distractor_initial",
noun_onset ==360 & target==TRUE ~ "target_initial"),
noun_onset>360 & target == FALSE ~ "looking_at_distractor",
noun_onset>360 & target == FALSE ~ "looking_at_target"
)
RT <- kbh_data_clean %>%
filter(noun_onset >= 360 & noun_onset <= 1800)%>%
group_by(trial_number) %>%
mutate(distractor_initial_trial = case_when(noun_onset ==360 & target==FALSE ~ "distractor_initial",
noun_onset ==360 & target==TRUE ~ "target_initial"),
noun_onset>=361 & target == FALSE ~ "looking_at_distractor",
noun_onset>=361 & target == FALSE ~ "looking_at_target"
)
RT <- kbh_data_clean %>%
filter(noun_onset >= 360 & noun_onset <= 1800)%>%
group_by(trial_number) %>%
mutate(distractor_initial_trial = case_when(noun_onset ==360 & target==FALSE ~ "distractor_initial",
noun_onset ==360 & target==TRUE ~ "target_initial",
noun_onset>=361 & target == FALSE ~ "looking_at_distractor",
noun_onset>=361 & target == FALSE ~ "looking_at_target")
)
unique(RT$distractor_initial_trial)
RT <- kbh_data_clean %>%
filter(noun_onset >= 360 & noun_onset <= 1800)%>%
group_by(trial_number) %>%
mutate(distractor_initial_trial = case_when(noun_onset ==360 & target==FALSE ~ "distractor_initial",
noun_onset ==360 & target==TRUE ~ "target_initial",
noun_onset>=361 & target == FALSE ~ "looking_at_distractor",
noun_onset>=361 & target == TRUE ~ "looking_at_target")
)
unique(RT$distractor_initial_trial)
RT <- kbh_data_clean %>%
filter(noun_onset >= 360 & noun_onset <= 1800)%>%
group_by(trial_number) %>%
mutate(distractor_initial_trial = case_when(
noun_onset >=360 & noun_onset <=400 & target==FALSE ~ "distractor_initial",
noun_onset >=360 & noun_onset <=400 & target==TRUE ~ "target_initial",
noun_onset>=401 & target == FALSE ~ "looking_at_distractor",
noun_onset>=401 & target == TRUE ~ "looking_at_target")
)
RT <- kbh_data_clean %>%
filter(noun_onset >= 360 & noun_onset <= 1800)%>%
group_by(trial_number) %>%
mutate(distractor_initial_trial = case_when(
noun_onset >=360 & noun_onset <=400 & target==FALSE ~ "distractor_initial",
noun_onset >=360 & noun_onset <=400 & target==TRUE ~ "target_initial")
)
RT <- kbh_data_clean %>%
filter(noun_onset >= 360 & noun_onset <= 1800)%>%
mutate(distractor_initial_trial = case_when(
noun_onset >=360 & noun_onset <=400 & target==FALSE ~ "distractor_initial",
noun_onset >=360 & noun_onset <=400 & target==TRUE ~ "target_initial")
) %>%
group_by(trial_number) %>%
summarise()
View(RT)
RT <- kbh_data_clean %>%
filter(noun_onset >= 360 & noun_onset <= 1800)%>%
mutate(distractor_initial_trial = case_when(
noun_onset >=360 & noun_onset <=400 & target==FALSE ~ "distractor_initial",
noun_onset >=360 & noun_onset <=400 & target==TRUE ~ "target_initial")
) %>%
group_by(trial_number, distractor_initial_trial) %>%
summarise()
View(RT)
RT <- kbh_data_clean %>%
filter(noun_onset >= 360 & noun_onset <= 1800)%>%
mutate(distractor_initial_trial = case_when(
noun_onset >=360 & noun_onset <=400 & target==FALSE ~ "distractor_initial",
noun_onset >=360 & noun_onset <=400 & target==TRUE ~ "target_initial")
)
View(RT)
distractor_initial_trials <- kbh_data_clean %>%
filter(noun_onset >= 360 & noun_onset <= 1800)%>%
mutate(initial_trial = case_when(
noun_onset >=360 & noun_onset <=400 & target==FALSE ~ "distractor_initial",
noun_onset >=360 & noun_onset <=400 & target==TRUE ~ "target_initial")
)
distractor_initial_trials <- kbh_data_clean %>%
filter(noun_onset >= 360 & noun_onset <= 1800)%>%
mutate(initial_trial = case_when(
noun_onset >=360 & noun_onset <=400 & target==FALSE ~ "distractor_initial",
noun_onset >=360 & noun_onset <=400 & target==TRUE ~ "target_initial")
) %>%
group_by(recording_name, subject_id, trial_number, media_name,trial_number, distractor_initial_trial) %>%
summarise()
distractor_initial_trials <- kbh_data_clean %>%
filter(noun_onset >= 360 & noun_onset <= 1800)%>%
mutate(initial_trial = case_when(
noun_onset >=360 & noun_onset <=400 & target==FALSE ~ "distractor_initial",
noun_onset >=360 & noun_onset <=400 & target==TRUE ~ "target_initial")
) %>%
group_by(recording_name, subject_id, trial_number, media_name,trial_number, initial_trial) %>%
summarise()
distractor_initial_trials <- kbh_data_clean %>%
filter(noun_onset >= 360 & noun_onset <= 1800)%>%
mutate(initial_trial = case_when(
noun_onset >=360 & noun_onset <=400 & target==FALSE ~ "distractor_initial",
noun_onset >=360 & noun_onset <=400 & target==TRUE ~ "target_initial")
) %>%
group_by(recording_name, subject_id, trial_number, media_name, initial_trial) %>%
summarise()
View(distractor_initial_trials)
distractor_initial_trials <- kbh_data_clean %>%
filter(noun_onset >= 360 & noun_onset <= 1800)%>%
mutate(initial_trial = case_when(
noun_onset >=360 & noun_onset <=400 & target==FALSE ~ "distractor_initial",
noun_onset >=360 & noun_onset <=400 & target==TRUE ~ "target_initial")
) %>%
group_by(recording_name, subject_id, trial_number, media_name, initial_trial) %>%
summarise() %>%
filter(initial_trial =="distractor_initial")
View(distractor_initial_trials)
RT <- right_join(kbh_data_clean, distractor_initial_trials)
View(RT)
RT <- merge(kbh_data_clean, RT)
RT <- full_join (kbh_data_clean, RT)
View(RT)
unique(RT$initial_trial)
RT <- full_join (kbh_data_clean, RT) %>%
filter(initial_trial=="distractor_initial")
View(RT)
RT <- full_join (kbh_data_clean, RT) %>%
filter(initial_trial=="distractor_initial") %>%
filter(noun_onset >= 360 & noun_onset <= 1800)%>%
mutate(first_true = ifelse(target == TRUE & lag(target) == FALSE, 1, 0))
View(RT)
740-360
